"use strict";(self.webpackChunkconnectify=self.webpackChunkconnectify||[]).push([[362],{6362:function(t,r,n){n.r(r),n.d(r,{ProfileContainer:function(){return I},default:function(){return B}});var e=n(8683),s=n(5671),o=n(3144),u=n(136),i=n(5716),a=n(2791),c=n(364),l="ProfileInfo_descriptionBlock__rDg72",f=n(885),d=n(184),p=function(t){var r=t.status,n=t.updateUserStatus,e=(0,a.useState)(!1),s=(0,f.Z)(e,2),o=s[0],u=s[1],i=(0,a.useState)(r),c=(0,f.Z)(i,2),l=c[0],p=c[1];(0,a.useEffect)((function(){p(r)}),[r]);var h=function(){u(!1),n(l)};return(0,d.jsx)("div",{children:o?(0,d.jsx)("div",{children:(0,d.jsx)("input",{onChange:function(t){p(t.currentTarget.value)},autoFocus:!0,onBlur:h,onKeyPress:function(t){"Enter"===t.key&&h()},value:l})}):(0,d.jsx)("p",{onDoubleClick:function(){u(!0)},children:r||"No status"})})},h=function(t){var r=t.profile,n=t.status,e=t.updateUserStatus;return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:l,children:[(0,d.jsx)("img",{src:null===r||void 0===r?void 0:r.photos.large}),(0,d.jsx)("p",{children:null===r||void 0===r?void 0:r.fullName}),(0,d.jsx)(p,{status:n,updateUserStatus:e})]})})},m={postsBlock:"MyPosts_postsBlock__6+HC-"},v="Post_item__Dm28h";function x(t){return(0,d.jsxs)("div",{className:v,children:[(0,d.jsx)("img",{src:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg"}),t.message,(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"like"})," ",t.likesCount]})]})}var j=n(6139),y=n(704),Z=n(169),g=n(4254),k=(0,Z.D)(10),S=(0,y.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,d.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,d.jsx)("div",{children:(0,d.jsx)(j.Z,{validate:[Z.C,k],component:g.gx,placeholder:"What's new?",name:"newPostText"})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Add post"})})]})})),_=a.memo((function(t){console.log("RENDER");var r=t.posts.map((function(t){return(0,d.jsx)(x,{id:t.id,message:t.message,likesCount:t.likesCount},t.id)}));return(0,d.jsxs)("div",{className:m.postsBlock,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)(S,{onSubmit:function(r){t.addPost(r.newPostText)}}),(0,d.jsx)("div",{className:m.posts,children:r})]})})),C=n(1304),P=function(t){return{type:C.fw,status:t}},w=(0,c.$j)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(r){t(function(t){return{type:C.QB,newPostText:t}}(r))}}}))(_),b=function(t){return(0,d.jsxs)("div",{children:[(0,d.jsx)(h,{profile:t.profile,status:t.status,updateUserStatus:t.updateUserStatus}),(0,d.jsx)(w,{})]})},F=n(7781),U=n(9271),N=n(2932),T=n(5861),A=n(7757),D=n.n(A),E=n(4461),I=function(t){(0,u.Z)(n,t);var r=(0,i.Z)(n);function n(){return(0,s.Z)(this,n),r.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=String(this.props.authorizedUserId)),this.props.setUserProfile(t),this.props.getUserStatus(t)}},{key:"render",value:function(){return(0,d.jsx)(b,(0,e.Z)((0,e.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))}}]),n}(a.Component),B=(0,F.qC)((0,c.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),(function(t){return{setUserProfile:function(r){t(function(t){return function(){var r=(0,T.Z)(D().mark((function r(n){var e;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.h3.getProfile(t);case 2:e=r.sent,n((s=e.data,{type:C.cF,profile:s}));case 4:case"end":return r.stop()}var s}),r)})));return function(t){return r.apply(this,arguments)}}()}(r))},getUserStatus:function(r){t(function(t){return function(){var r=(0,T.Z)(D().mark((function r(n){var e;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.FZ.getUserStatus(t);case 2:e=r.sent,n(P(e.data));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}(r))},updateUserStatus:function(r){t(function(t){return function(){var r=(0,T.Z)(D().mark((function r(n){return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.FZ.updateUserStatus(t);case 2:0===r.sent.data.resultCode&&n(P(t));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}(r))}}})),U.EN,N.D)(I)},4254:function(t,r,n){n.d(r,{gx:function(){return l},II:function(){return f},Gr:function(){return d}});var e=n(8683),s=n(5987),o=(n(2791),n(6139)),u=n(7851),i=n(184),a=["input","meta","FormType"],c=function(t){var r=t.input,n=t.meta,o=t.FormType,c=(0,s.Z)(t,a),l=n.touched&&n.error,f="".concat(u.Z.formControl," ").concat(l?u.Z.error:"");return(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(o,(0,e.Z)((0,e.Z)({},r),c)),l&&(0,i.jsx)("div",{className:u.Z.errorMessage,children:n.error})]})},l=function(t){var r=Object.assign({},t);return(0,i.jsx)(c,(0,e.Z)((0,e.Z)({},r),{},{FormType:"textarea"}))},f=function(t){var r=Object.assign({},t);return(0,i.jsx)(c,(0,e.Z)((0,e.Z)({},r),{},{FormType:"input"}))};function d(t,r,n,s,a){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,i.jsxs)("div",{className:u.Z.createFieldRoot,children:[(0,i.jsx)(o.Z,(0,e.Z)({placeholder:t,name:r,validate:n,component:s,className:null===a||void 0===a?void 0:a.className},a))," ",(0,i.jsxs)("label",{className:u.Z.createFieldText,children:[" ",c," "]})]})}},2932:function(t,r,n){n.d(r,{D:function(){return l}});var e=n(8683),s=n(5987),o=(n(2791),n(9271)),u=n(364),i=n(184),a=["isAuth"],c=function(t){return{isAuth:t.auth.isAuth}};function l(t){return(0,u.$j)(c)((function(r){var n=r.isAuth,u=(0,s.Z)(r,a);return n?(0,i.jsx)(t,(0,e.Z)({},u)):(0,i.jsx)(o.l_,{to:"/login"})}))}},169:function(t,r,n){n.d(r,{C:function(){return e},D:function(){return s}});var e=function(t){return t?void 0:"error message"},s=function(t){return function(r){if(r.length>t)return"Max length is ".concat(t," symbols")}}},7851:function(t,r){r.Z={formControl:"FormsControls_formControl__KaVHj",error:"FormsControls_error__VuK27",errorMessage:"FormsControls_errorMessage__KVrex",formSummaryError:"FormsControls_formSummaryError__FRBhk"}},885:function(t,r,n){n.d(r,{Z:function(){return s}});var e=n(181);function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,s,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(e=n.next()).done)&&(o.push(e.value),!r||o.length!==r);u=!0);}catch(a){i=!0,s=a}finally{try{u||null==n.return||n.return()}finally{if(i)throw s}}return o}}(t,r)||(0,e.Z)(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=362.19d45a44.chunk.js.map